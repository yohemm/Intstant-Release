name: POC Tests (Verbose)

on:
  push:
    branches:
      - main
      - develop
      - feat/*
  pull_request:

jobs:
  poc-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Show environment
        run: |
          echo "Runner: $(uname -a)"
          echo "Git: $(git --version)"
          echo "Bash: $(bash --version | head -n 1)"
      - name: Build test image
        run: docker build -t instantrelease-poc-tests -f tests_poc/Dockerfile .
      - name: Run POC tests (Docker)
        run: |
          docker run --rm \
            -v "$PWD:/repo" \
            -w /repo \
            instantrelease-poc-tests
